<h2><%= @pet.name %>'s Health Logs</h2>
<hr>

<%= link_to 'Add New Log', new_user_pet_log_path(@user, @pet), class: 'btn btn-primary mt-3' %>

<div id="loading-overlay">
  <div class="loader"></div>
  <p style="margin-top: 15px; font-weight: bold;">Gemini is analyzing your data...</p>
</div>

<% if @logs.any? %>
  <% @logs.each do |log| %>
    <div class="card mb-2 p-3">
      <%= link_to "Date: #{log.date}", user_pet_log_path(@user, @pet, log) %>
    </div>
  <% end %>
<% else %>
  <p>No logs yet.</p>
<% end %>

<%= form_with url: export_user_pet_logs_path(format: :pdf), method: :post, html: { onsubmit: "document.getElementById('loading-overlay').style.visibility = 'visible';" } do |f| %>
  <div class="date-range-selector">
    <%= f.label :start_date, "Start Date:" %>
    <%= f.date_field :start_date, id: "start-date", required: true %>
  </div>

  <div class="date-range-selector">
    <%= f.label :end_date, "End Date:" %>
    <%= f.date_field :end_date, id: "end-date", required: true, max: Date.today %>
  </div>

  <div class="language-selector">
    <%= f.label :language, "Language:" %>
    <%= f.select :language, ["English", "日本語", "Português"]%>
  </div>

  <%= f.submit "Export Data"%>
<% end %>
